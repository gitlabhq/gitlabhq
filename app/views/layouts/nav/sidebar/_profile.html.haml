.nav-sidebar{ class: ("sidebar-icons-only" if collapsed_sidebar?) }
  .nav-sidebar-inner-scroll
    .context-header
      = link_to profile_path, title: 'Profile Settings' do
        .avatar-container.s40.settings-avatar
          = icon('user')
        .sidebar-context-title User Settings
    %ul.sidebar-top-level-items
      = nav_link(path: 'profiles#show', html_options: {class: 'home'}) do
        = sidebar_link profile_path, title: _('Profile Settings') do
          .nav-icon-container
            = custom_icon('profile')
          %span.nav-item-name
            Profile
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(path: 'profiles#show', html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_path do
              %strong.fly-out-top-item-name
                #{ _('Profile') }
      = nav_link(controller: [:accounts, :two_factor_auths]) do
        = sidebar_link profile_account_path, title: _('Account') do
          .nav-icon-container
            = custom_icon('account')
          %span.nav-item-name
            Account
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: [:accounts, :two_factor_auths], html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_account_path do
              %strong.fly-out-top-item-name
                #{ _('Account') }
      - if current_application_settings.should_check_namespace_plan?
        = nav_link(controller: :billings) do
          = sidebar_link profile_billings_path, title: _('Billing') do
            .nav-icon-container
              = custom_icon('credit_card')
            %span.nav-item-name
              Billing
          %ul.sidebar-sub-level-items.is-fly-out-only
            = nav_link(controller: :billings, html_options: { class: "fly-out-top-item" } ) do
              = link_to profile_billings_path do
                %strong.fly-out-top-item-name
                  #{ _('Billing') }
      - if current_application_settings.user_oauth_applications?
        = nav_link(controller: 'oauth/applications') do
          = sidebar_link applications_profile_path, title: _('Applications') do
            .nav-icon-container
              = custom_icon('applications')
            %span.nav-item-name
              Applications
          %ul.sidebar-sub-level-items.is-fly-out-only
            = nav_link(controller: 'oauth/applications', html_options: { class: "fly-out-top-item" } ) do
              = link_to applications_profile_path do
                %strong.fly-out-top-item-name
                  #{ _('Applications') }
      = nav_link(controller: :chat_names) do
        = sidebar_link profile_chat_names_path, title: _('Chat') do
          .nav-icon-container
            = custom_icon('chat')
          %span.nav-item-name
            Chat
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: :chat_names, html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_chat_names_path do
              %strong.fly-out-top-item-name
                #{ _('Chat') }
      = nav_link(controller: :personal_access_tokens) do
        = sidebar_link profile_personal_access_tokens_path, title: _('Access Tokens') do
          .nav-icon-container
            = custom_icon('access_tokens')
          %span.nav-item-name
            Access Tokens
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: :personal_access_tokens, html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_personal_access_tokens_path do
              %strong.fly-out-top-item-name
                #{ _('Access Tokens') }
      = nav_link(controller: :emails) do
        = sidebar_link profile_emails_path, title: _('Emails') do
          .nav-icon-container
            = custom_icon('emails')
          %span.nav-item-name
            Emails
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: :emails, html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_emails_path do
              %strong.fly-out-top-item-name
                #{ _('Emails') }
      - unless current_user.ldap_user?
        = nav_link(controller: :passwords) do
          = sidebar_link edit_profile_password_path, title: _('Password') do
            .nav-icon-container
              = custom_icon('lock')
            %span.nav-item-name
              Password
          %ul.sidebar-sub-level-items.is-fly-out-only
            = nav_link(controller: :passwords, html_options: { class: "fly-out-top-item" } ) do
              = link_to edit_profile_password_path do
                %strong.fly-out-top-item-name
                  #{ _('Password') }
      = nav_link(controller: :notifications) do
        = sidebar_link profile_notifications_path, title: _('Notifications') do
          .nav-icon-container
            = custom_icon('notifications')
          %span.nav-item-name
            Notifications
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: :notifications, html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_notifications_path do
              %strong.fly-out-top-item-name
                #{ _('Notifications') }
      = nav_link(controller: :keys) do
        = sidebar_link profile_keys_path, title: _('SSH Keys') do
          .nav-icon-container
            = custom_icon('key')
          %span.nav-item-name
            SSH Keys
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: :keys, html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_keys_path do
              %strong.fly-out-top-item-name
                #{ _('SSH Keys') }
      = nav_link(controller: :gpg_keys) do
        = sidebar_link profile_gpg_keys_path, title: _('GPG Keys') do
          .nav-icon-container
            = custom_icon('key_2')
          %span.nav-item-name
            GPG Keys
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: :gpg_keys, html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_gpg_keys_path do
              %strong.fly-out-top-item-name
                #{ _('GPG Keys') }
      = nav_link(controller: :preferences) do
        = sidebar_link profile_preferences_path, title: _('Preferences') do
          .nav-icon-container
            = custom_icon('preferences')
          %span.nav-item-name
            Preferences
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(controller: :preferences, html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_preferences_path do
              %strong.fly-out-top-item-name
                #{ _('Preferences') }
      = nav_link(path: 'profiles#audit_log') do
        = sidebar_link audit_log_profile_path, title: _('Authentication log') do
          .nav-icon-container
            = custom_icon('authentication_log')
          %span.nav-item-name
            Authentication log
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(path: 'profiles#audit_log', html_options: { class: "fly-out-top-item" } ) do
            = link_to audit_log_profile_path do
              %strong.fly-out-top-item-name
                #{ _('Authentication Log') }
      = nav_link(path: 'profiles#pipeline_quota') do
        = sidebar_link profile_pipeline_quota_path, title: _('Pipeline quota') do
          .nav-icon-container
            = custom_icon('pipeline')
          %span.nav-item-name
            Pipeline quota
        %ul.sidebar-sub-level-items.is-fly-out-only
          = nav_link(path: 'profiles#pipeline_quota', html_options: { class: "fly-out-top-item" } ) do
            = link_to profile_pipeline_quota_path do
              %strong.fly-out-top-item-name
                #{ _('Pipeline quota') }

    = render 'shared/sidebar_toggle_button'
