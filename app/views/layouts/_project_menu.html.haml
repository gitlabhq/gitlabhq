%nav.main_menu
  = render "layouts/const_menu_links"
  = link_to project_path(@project), :class => "#{project_tab_class}", :title => t('.project') do 
    = t '.project'

  - if @project.repo_exists?
    - if can? current_user, :download_code, @project
    = link_to t('.files'), tree_project_ref_path(@project, @project.root_ref), :class => tree_tab_class
      = link_to t('.commits'), project_commits_path(@project), :class => commit_tab_class

    = link_to t('.network'), graph_project_path(@project), :class => current_page?(:controller => "projects", :action => "graph", :id => @project) ? "current" : nil
    - if @project.issues_enabled
      = link_to  project_issues_filter_path(@project), :class => issues_tab? ? "current" : nil do
        = t 'layouts.app_menu.issues'
        %span.count= @project.issues.opened.count
    - if @project.merge_requests_enabled
      = link_to project_merge_requests_path(@project), :class => (controller.controller_name == "merge_requests") ? "current" : nil do
        = t 'layouts.app_menu.merge_requests'
        %span.count= @project.merge_requests.opened.count

    - if @project.wall_enabled
      = link_to wall_project_path(@project), :class => wall_tab? ? "current" : nil do
        = t '.wall'
    
    - if @project.wiki_enabled
      = link_to project_wiki_path(@project, :index), :class => (controller.controller_name == "wikis") ? "current" : nil do
        = t '.wiki'
