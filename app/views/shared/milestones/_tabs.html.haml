.scrolling-tabs-container.inner-page-scroll-tabs.is-smaller
  .fade-left= icon('angle-left')
  .fade-right= icon('angle-right')
  %ul.nav-links.scrolling-tabs
    - if milestone.is_a?(GlobalMilestone) || can?(current_user, :read_issue, @project)
      %li.active
        = link_to '#tab-issues', 'data-toggle' => 'tab', 'data-show' => '.tab-issues-buttons' do
          Issues
          %span.badge= milestone.issues_visible_to_user(current_user).size
      %li
        = link_to '#tab-merge-requests', 'data-toggle' => 'tab', 'data-endpoint': milestone_merge_request_path(milestone) do
          Merge Requests
          %span.badge= milestone.merge_requests.size
    - else
      %li.active
        = link_to '#tab-merge-requests', 'data-toggle' => 'tab', 'data-endpoint': milestone_merge_request_path(milestone) do
          Merge Requests
          %span.badge= milestone.merge_requests.size
    %li
      = link_to '#tab-participants', 'data-toggle' => 'tab', 'data-endpoint': milestone_participants_path(milestone) do
        Participants
        %span.badge= milestone.participants.count
    %li
      = link_to '#tab-labels', 'data-toggle' => 'tab', 'data-endpoint': milestone_labels_path(milestone) do
        Labels
        %span.badge= milestone.labels.count

- show_project_name = local_assigns.fetch(:show_project_name, false)
- show_full_project_name = local_assigns.fetch(:show_full_project_name, false)

.tab-content.milestone-content
  - if milestone.is_a?(GlobalMilestone) || can?(current_user, :read_issue, @project)
    .tab-pane.active#tab-issues
      = render 'shared/milestones/issues_tab', issues: milestone.issues_visible_to_user(current_user).include_associations, show_project_name: show_project_name, show_full_project_name: show_full_project_name
    .tab-pane#tab-merge-requests
      -# loaded async
      .text-center.prepend-top-default
        = icon('spin spinner 2x')
  - else
    .tab-pane.active#tab-merge-requests
      -# loaded async
      .text-center.prepend-top-default
        = icon('spin spinner 2x')
  .tab-pane#tab-participants
    -# loaded async
    .text-center.prepend-top-default
      = icon('spin spinner 2x')
  .tab-pane#tab-labels
    -# loaded async
    .text-center.prepend-top-default
      = icon('spin spinner 2x')
