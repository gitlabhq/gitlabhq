= content_tag @container_tag, **options_attrs, id: id do
  %header.crud-header.gl-relative.gl-flex.gl-flex-wrap.gl-justify-between.gl-gap-x-5.gl-gap-y-2.gl-rounded-t-lg.gl-py-0.gl-pr-2.gl-pl-3{ class: [('gl-pr-9' if @is_collapsible), '@md/panel:gl-flex-nowrap'] }
    .gl-flex.gl-grow.gl-flex-col.gl-self-center.gl-py-3
      %h2.gl-mx-0.gl-my-2.gl-inline-flex.gl-items-center.gl-gap-3.gl-text-base.gl-font-bold.gl-leading-normal.gl-text-heading{ data: { testid: 'crud-title' } }
        = @title
        - if @count
          %span.crud-count.gl-inline-flex.gl-items-center.gl-gap-2.gl-text-sm.gl-text-subtle.gl-font-normal{ data: { testid: 'crud-count' } }
            - if @icon
              = sprite_icon(@icon, css_class: icon_classes)
              %span{ @count_options }
                = @count
            - else
              = render Pajamas::BadgeComponent.new(@count, **@count_options.merge(class: 'gl-self-baseline'))
      - if description? || @description
        %p.gl-text-sm.gl-text-subtle.gl-leading-normal{ class: '!gl-mb-0', data: { testid: 'crud-description' } }
          = description || @description
    .gl-flex.gl-gap-3.gl-items-start.gl-my-3{ data: { testid: 'crud-actions' } }
      = actions

      - if @toggle_text
        = render Pajamas::ButtonComponent.new(size: :small, button_options: toggle_button_options_attrs) do
          = @toggle_text

      - if @is_collapsible
        .gl-border-l.gl-absolute.gl-right-3.gl-flex.gl-h-5.gl-items-center.gl-border-l-strong.gl-pl-3{ class: 'gl-top-1/2 -gl-translate-y-1/2' }
          = render Pajamas::ButtonComponent.new(category: :tertiary,
            size: :small,
            button_text_classes: '!gl-overflow-visible',
            button_options: { class: '-gl-mr-2 js-crud-collapsible-button has-tooltip', title: _('Collapse'), 'aria-expanded': 'true', 'aria-controls': id, data: { collapse_title: _('Expand'), expand_title: _('Collapse') } }) do
            = render Pajamas::AnimatedIconComponent.new(icon: :chevron_lg_down_up,
              variant: :current,
              is_on: true,
              icon_options: { class: 's16 !-gl-mx-2 js-crud-collapsible-icon' })

  - if form?
    .gl-bg-default.gl-mx-4.gl-mb-4.gl-rounded-lg.gl-p-4.gl-shadow-sm{ form_options_attrs }
      = form

  .crud-body.gl-grow.gl-p-3.gl-bg-default.gl-rounded-lg.forced-colors:gl-border.contrast-more:gl-border{ body_options_attrs }
    = body

    - if pagination?
      .crud-pagination.gl-flex.gl-justify-center.gl-p-3{ data: { testid: 'crud-pagination' } }
        = pagination

  - if footer?
    .gl-rounded-b-lg.gl-px-3.gl-pt-3.gl-pb-2{ footer_options_attrs }
      = footer
