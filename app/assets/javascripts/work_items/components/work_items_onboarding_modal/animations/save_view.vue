<script>
const frameDelays = [2000, 1000, 300, 2000];
const frames = [
  {
    // Frame 1 - empty search bar
    highlightPill: null,
    activeTab: 'all',
    blueBarX: 10,
    blueBarWidth: 72,
    viewIcon: 'epic',
    showPillButtons: false,
    showFrame1Tabs: true,
    plusIconX: 104,
  },
  {
    // Frame 2 - pill buttons appear
    highlightPill: null,
    activeTab: 'all',
    blueBarX: 10,
    blueBarWidth: 72,
    viewIcon: 'issue',
    showPillButtons: true,
    showFrame1Tabs: true,
    plusIconX: 104,
  },
  {
    // Frame 3 - large highlight pill appears
    highlightPill: { x: 87, y: 9, width: 93, height: 32 },
    activeTab: 'all',
    blueBarX: 10,
    blueBarWidth: 72,
    viewIcon: 'issue',
    showPillButtons: true,
    showFrame1Tabs: true,
    plusIconX: 104,
  },
  {
    // Frame 4 - different tab active and pill gone
    highlightPill: null,
    activeTab: 'issues',
    blueBarX: 86,
    blueBarWidth: 61,
    viewIcon: 'issue',
    showPillButtons: true,
    showFrame1Tabs: false,
    plusIconX: 167,
  },
];

export default {
  name: 'SaveViewAnimation',
  data() {
    return {
      frame: 0,
    };
  },
  computed: {
    currentFrame() {
      return frames[this.frame];
    },
  },
  mounted() {
    this.startAnimation();
  },
  beforeDestroy() {
    if (this.animationTimeout) {
      clearTimeout(this.animationTimeout);
    }
  },
  methods: {
    startAnimation() {
      this.scheduleNextFrame();
    },
    scheduleNextFrame() {
      const currentDelay = frameDelays[this.frame];

      this.animationTimeout = setTimeout(() => {
        this.frame = (this.frame + 1) % frames.length;
        this.scheduleNextFrame();
      }, currentDelay);
    },
  },
};
</script>

<template>
  <div class="animation-container">
    <svg
      width="240"
      height="170"
      viewBox="0 0 240 170"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      style="fill: none"
    >
      <g clip-path="url(#clip0)">
        <!-- Border -->
        <rect x="0.5" y="0.5" width="239" height="169" rx="7.5" stroke="#BFBFC3" />

        <!-- Content rows - static -->
        <rect x="28" y="138" width="224" height="16" rx="8" fill="#DCDCDE" />
        <rect x="28" y="116" width="184" height="16" rx="8" fill="#BFBFC3" />

        <!-- Icon - changes between frames -->
        <g v-if="currentFrame.viewIcon === 'epic'" clip-path="url(#clip1)">
          <path
            d="M20.333 116C20.7366 116 21.1016 116.243 21.2568 116.615L23.8848 122.923C24.2706 123.849 23.6564 124.864 22.6963 124.987L22.5 125H9.5V125.75C9.5 125.888 9.61193 126 9.75 126H21.75C22.1641 126 22.5 126.336 22.5 126.75C22.5 127.164 22.1641 127.5 21.75 127.5H11.5V128.25C11.5 128.388 11.6119 128.5 11.75 128.5H20.25C20.6641 128.5 21 128.836 21 129.25C21 129.664 20.6641 130 20.25 130H11.75C10.7835 130 10 129.216 10 128.25V127.5H9.75C8.7835 127.5 8 126.716 8 125.75V123.521C7.99722 123.324 8.03245 123.122 8.11523 122.923L10.7432 116.615C10.8791 116.289 11.1753 116.062 11.5176 116.011L11.667 116H20.333ZM9.5 123.5H22.5L20 117.5H12L9.5 123.5Z"
            fill="#89888D"
            class="animated-element"
          />
        </g>
        <path
          v-else
          d="M19 116C20.1046 116 21 116.895 21 118V128C21 129.036 20.2128 129.887 19.2041 129.989L19 130H13L12.7959 129.989C11.8543 129.894 11.1062 129.146 11.0107 128.204L11 128V118C11 116.895 11.8954 116 13 116H19ZM13 117.5C12.7239 117.5 12.5 117.724 12.5 118V128C12.5 128.276 12.7239 128.5 13 128.5H19C19.2761 128.5 19.5 128.276 19.5 128V118C19.5 117.724 19.2761 117.5 19 117.5H13ZM17.5 119C17.9142 119 18.25 119.336 18.25 119.75C18.25 120.164 17.9142 120.5 17.5 120.5H14.5C14.0858 120.5 13.75 120.164 13.75 119.75C13.75 119.336 14.0858 119 14.5 119H17.5Z"
          fill="#89888D"
          class="animated-element"
        />

        <!-- Search bar -->
        <rect x="9" y="68" width="222" height="30" rx="15" stroke="#BFBFC3" stroke-width="2" />

        <!-- Search icon -->
        <path
          d="M211 76C214.314 76 217 78.6863 217 82C217 83.3865 216.528 84.6617 215.738 85.6777L218.78 88.7197C219.073 89.0126 219.073 89.4874 218.78 89.7803C218.487 90.0732 218.013 90.0732 217.72 89.7803L214.678 86.7383C213.662 87.528 212.386 88 211 88C207.686 88 205 85.3137 205 82C205 78.6863 207.686 76 211 76ZM211 77.5C208.515 77.5 206.5 79.5147 206.5 82C206.5 84.4853 208.515 86.5 211 86.5C213.485 86.5 215.5 84.4853 215.5 82C215.5 79.5147 213.485 77.5 211 77.5Z"
          fill="#89888D"
        />

        <!-- Pill buttons -->
        <g :style="{ opacity: currentFrame.showPillButtons ? 1 : 0 }" class="pill-buttons">
          <path
            d="M14 83C14 77.4772 18.4772 73 24 73H51V93H24C18.4772 93 14 88.5228 14 83Z"
            fill="#DCDCDE"
          />
          <path
            d="M23.9492 80.9951V82.2681H20.3398V80.9951H23.9492ZM21.1562 79.5664H22.8374V85.2222C22.8374 85.5874 22.9932 85.7593 23.3691 85.7593C23.4927 85.7593 23.7666 85.7163 23.8794 85.6895L24.1157 86.9409C23.7397 87.0483 23.3691 87.0859 23.0361 87.0859C21.8115 87.0859 21.1562 86.4844 21.1562 85.3726V79.5664ZM25.1899 89.1216L25.5767 87.8647L25.7808 87.9238C26.4414 88.0957 26.8926 87.8916 26.9302 87.3223L26.9678 87.0161L24.7119 80.9951H26.4951L27.478 84.0674C27.7197 84.8569 27.8325 85.6304 28.0312 86.5059H27.6553C27.8433 85.6304 28.0205 84.8462 28.2783 84.0674L29.3096 80.9951H31.0713L28.5308 87.6875C28.1655 88.6597 27.5264 89.2881 26.2803 89.2881C25.8452 89.2881 25.437 89.2183 25.1899 89.1216ZM31.8984 89.2451V80.9951H33.5527V82.0156H33.6279C33.8481 81.5215 34.3369 80.9199 35.3359 80.9199C36.6519 80.9199 37.7637 81.9458 37.7637 84.0083C37.7637 86.0171 36.6948 87.0967 35.3252 87.0967C34.3638 87.0967 33.8589 86.5381 33.6279 86.0386H33.5796V89.2451H31.8984ZM34.7935 85.7593C35.5991 85.7593 36.0342 85.0396 36.0342 84.0029C36.0342 82.9717 35.6045 82.2627 34.7935 82.2627C33.9932 82.2627 33.542 82.9395 33.542 84.0029C33.542 85.061 34.0039 85.7593 34.7935 85.7593ZM41.5986 87.1182C39.7456 87.1182 38.6123 85.9365 38.6123 84.0298C38.6123 82.1768 39.751 80.9199 41.5181 80.9199C43.1187 80.9199 44.3594 81.9404 44.3594 83.9707V84.4326H39.2783V83.396H43.543L42.7534 83.6646C42.7534 82.7568 42.3398 82.1768 41.5342 82.1768C40.7231 82.1768 40.2773 82.7729 40.2773 83.6001V84.3359C40.2773 85.3457 40.8145 85.8667 41.6255 85.8667C42.1733 85.8667 42.5869 85.6304 42.7534 85.1846L44.2681 85.4531C43.9727 86.4629 43.0059 87.1182 41.5986 87.1182Z"
            fill="#626168"
          />

          <rect width="22" height="20" transform="translate(53 73)" fill="#DCDCDE" />
          <path
            d="M60.0522 87V80.9951H61.7334V87H60.0522ZM60.8901 80.2378C60.396 80.2378 59.9878 79.8564 59.9878 79.3892C59.9878 78.9165 60.396 78.5405 60.8901 78.5405C61.3896 78.5405 61.8032 78.9165 61.8032 79.3892C61.8032 79.8564 61.3896 80.2378 60.8901 80.2378ZM65.4932 87.1182C64.0215 87.1182 63.0117 86.4629 62.8022 85.3403L64.3706 85.0771C64.521 85.625 64.8916 85.9043 65.5469 85.9043C66.1377 85.9043 66.5029 85.6572 66.5029 85.3135C66.5029 85.0073 66.2559 84.8247 65.7349 84.7173L64.6982 84.5078C63.5327 84.2715 62.958 83.7021 62.958 82.7944C62.958 81.6343 63.9678 80.9199 65.5093 80.9199C66.9595 80.9199 67.835 81.5483 68.0552 82.542L66.5674 82.7944C66.4438 82.3862 66.1001 82.1177 65.5415 82.1177C65.0312 82.1177 64.6392 82.3486 64.6392 82.6924C64.6392 82.9771 64.8325 83.1812 65.3857 83.2939L66.4814 83.5088C67.6523 83.7451 68.2163 84.2715 68.2163 85.1309C68.2163 86.3286 67.0884 87.1182 65.4932 87.1182Z"
            fill="#626168"
          />

          <path
            d="M77 73H108C113.523 73 118 77.4772 118 83C118 88.5228 113.523 93 108 93H77V73Z"
            fill="#DCDCDE"
          />
          <path
            d="M83.7178 87V80.9951H85.3989V87H83.7178ZM84.5557 80.2378C84.0615 80.2378 83.6533 79.8564 83.6533 79.3892C83.6533 78.9165 84.0615 78.5405 84.5557 78.5405C85.0552 78.5405 85.4688 78.9165 85.4688 79.3892C85.4688 79.8564 85.0552 80.2378 84.5557 80.2378ZM89.1587 87.1182C87.687 87.1182 86.6772 86.4629 86.4678 85.3403L88.0361 85.0771C88.1865 85.625 88.5571 85.9043 89.2124 85.9043C89.8032 85.9043 90.1685 85.6572 90.1685 85.3135C90.1685 85.0073 89.9214 84.8247 89.4004 84.7173L88.3638 84.5078C87.1982 84.2715 86.6235 83.7021 86.6235 82.7944C86.6235 81.6343 87.6333 80.9199 89.1748 80.9199C90.625 80.9199 91.5005 81.5483 91.7207 82.542L90.2329 82.7944C90.1094 82.3862 89.7656 82.1177 89.207 82.1177C88.6968 82.1177 88.3047 82.3486 88.3047 82.6924C88.3047 82.9771 88.498 83.1812 89.0513 83.2939L90.147 83.5088C91.3179 83.7451 91.8818 84.2715 91.8818 85.1309C91.8818 86.3286 90.7539 87.1182 89.1587 87.1182ZM95.3677 87.1182C93.896 87.1182 92.8862 86.4629 92.6768 85.3403L94.2451 85.0771C94.3955 85.625 94.7661 85.9043 95.4214 85.9043C96.0122 85.9043 96.3774 85.6572 96.3774 85.3135C96.3774 85.0073 96.1304 84.8247 95.6094 84.7173L94.5728 84.5078C93.4072 84.2715 92.8325 83.7021 92.8325 82.7944C92.8325 81.6343 93.8423 80.9199 95.3838 80.9199C96.834 80.9199 97.7095 81.5483 97.9297 82.542L96.4419 82.7944C96.3184 82.3862 95.9746 82.1177 95.416 82.1177C94.9058 82.1177 94.5137 82.3486 94.5137 82.6924C94.5137 82.9771 94.707 83.1812 95.2603 83.2939L96.356 83.5088C97.5269 83.7451 98.0908 84.2715 98.0908 85.1309C98.0908 86.3286 96.9629 87.1182 95.3677 87.1182ZM101.228 87.0752C99.9761 87.0752 99.1543 86.2104 99.1543 84.8193V80.9951H100.835V84.5132C100.835 85.2437 101.233 85.6787 101.894 85.6787C102.56 85.6787 103.021 85.2275 103.021 84.4595V80.9951H104.708V87H103.118L103.091 85.4961H103.183C102.871 86.4951 102.237 87.0752 101.228 87.0752ZM108.779 87.1182C106.926 87.1182 105.793 85.9365 105.793 84.0298C105.793 82.1768 106.932 80.9199 108.699 80.9199C110.299 80.9199 111.54 81.9404 111.54 83.9707V84.4326H106.459V83.396H110.724L109.934 83.6646C109.934 82.7568 109.521 82.1768 108.715 82.1768C107.904 82.1768 107.458 82.7729 107.458 83.6001V84.3359C107.458 85.3457 107.995 85.8667 108.806 85.8667C109.354 85.8667 109.768 85.6304 109.934 85.1846L111.449 85.4531C111.153 86.4629 110.187 87.1182 108.779 87.1182Z"
            fill="#626168"
          />
        </g>

        <!-- Divider -->
        <path d="M10 49H239V51H10V49Z" fill="#DCDCDE" />

        <!-- Large highlight pill -->
        <g
          v-if="currentFrame.highlightPill"
          :style="{ opacity: currentFrame.highlightPill ? 0.4 : 0 }"
          style="mix-blend-mode: multiply"
          opacity="0.4"
          class="highlight-pill"
        >
          <rect
            :x="currentFrame.highlightPill.x"
            :y="currentFrame.highlightPill.y"
            :width="currentFrame.highlightPill.width"
            :height="currentFrame.highlightPill.height"
            rx="16"
            fill="#1F75CB"
          />
        </g>

        <!-- Tab text - Frame 1-3 -->
        <g :style="{ opacity: currentFrame.showFrame1Tabs ? 1 : 0 }" class="tabs-frame1">
          <path
            d="M20.3184 29L23.2832 20.2695H25.7383L28.7852 29H26.7051L25.3574 24.8984C25.0059 23.7617 24.666 22.4316 24.2852 20.8965H24.6953C24.3262 22.4375 24.0156 23.7793 23.6816 24.8984L22.3809 29H20.3184ZM22.2168 27.0254V25.5723H26.8926V27.0254H22.2168ZM31.8027 29.041C30.4199 29.041 29.7988 28.4668 29.7988 27.2773V20.2695H31.6328V27.0371C31.6328 27.4414 31.7676 27.6113 32.1133 27.6113C32.2949 27.6113 32.3828 27.5938 32.459 27.5703L32.7461 28.8945C32.5586 28.959 32.2188 29.041 31.8027 29.041ZM35.5527 29.041C34.1699 29.041 33.5488 28.4668 33.5488 27.2773V20.2695H35.3828V27.0371C35.3828 27.4414 35.5176 27.6113 35.8633 27.6113C36.0449 27.6113 36.1328 27.5938 36.209 27.5703L36.4961 28.8945C36.3086 28.959 35.9688 29.041 35.5527 29.041ZM40.0879 29V22.4492H41.9219V29H40.0879ZM41.002 21.623C40.4629 21.623 40.0176 21.207 40.0176 20.6973C40.0176 20.1816 40.4629 19.7715 41.002 19.7715C41.5469 19.7715 41.998 20.1816 41.998 20.6973C41.998 21.207 41.5469 21.623 41.002 21.623ZM46.709 22.4492V23.8379H42.7715V22.4492H46.709ZM43.6621 20.8906H45.4961V27.0605C45.4961 27.459 45.666 27.6465 46.0762 27.6465C46.2109 27.6465 46.5098 27.5996 46.6328 27.5703L46.8906 28.9355C46.4805 29.0527 46.0762 29.0938 45.7129 29.0938C44.377 29.0938 43.6621 28.4375 43.6621 27.2246V20.8906ZM50.7285 29.1289C48.707 29.1289 47.4707 27.8398 47.4707 25.7598C47.4707 23.7383 48.7129 22.3672 50.6406 22.3672C52.3867 22.3672 53.7402 23.4805 53.7402 25.6953V26.1992H48.1973V25.0684H52.8496L51.9883 25.3613C51.9883 24.3711 51.5371 23.7383 50.6582 23.7383C49.7734 23.7383 49.2871 24.3887 49.2871 25.291V26.0938C49.2871 27.1953 49.873 27.7637 50.7578 27.7637C51.3555 27.7637 51.8066 27.5059 51.9883 27.0195L53.6406 27.3125C53.3184 28.4141 52.2637 29.1289 50.7285 29.1289ZM54.9121 29V22.4492H56.6113L56.7051 24.1016H56.5762C56.8691 22.8711 57.6777 22.3555 58.5625 22.3555C59.4941 22.3555 60.0625 22.9355 60.3438 24.2188H60.1328C60.4316 22.9238 61.3574 22.3555 62.3594 22.3555C63.5664 22.3555 64.4512 23.1699 64.4512 24.582V29H62.6113V24.957C62.6113 24.2363 62.1836 23.8789 61.6094 23.8789C60.9648 23.8789 60.5664 24.3301 60.5664 24.998V29H58.7969V24.916C58.7969 24.2832 58.3867 23.8789 57.8066 23.8789C57.2031 23.8789 56.7461 24.3008 56.7461 25.0625V29H54.9121ZM68.5586 29.1289C66.9531 29.1289 65.8516 28.4141 65.623 27.1895L67.334 26.9023C67.498 27.5 67.9023 27.8047 68.6172 27.8047C69.2617 27.8047 69.6602 27.5352 69.6602 27.1602C69.6602 26.8262 69.3906 26.627 68.8223 26.5098L67.6914 26.2812C66.4199 26.0234 65.793 25.4023 65.793 24.4121C65.793 23.1465 66.8945 22.3672 68.5762 22.3672C70.1582 22.3672 71.1133 23.0527 71.3535 24.1367L69.7305 24.4121C69.5957 23.9668 69.2207 23.6738 68.6113 23.6738C68.0547 23.6738 67.627 23.9258 67.627 24.3008C67.627 24.6113 67.8379 24.834 68.4414 24.957L69.6367 25.1914C70.9141 25.4492 71.5293 26.0234 71.5293 26.9609C71.5293 28.2676 70.2988 29.1289 68.5586 29.1289Z"
            fill="#626168"
          />
          <!-- Plus icon wrapped in animated group -->
          <g
            :style="{ transform: `translateX(${currentFrame.plusIconX - 104}px)` }"
            class="animated-plus-icon"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M103.25 25.75V30.25C103.25 30.6642 103.586 31 104 31C104.414 31 104.75 30.6642 104.75 30.25V25.75H109.25C109.664 25.75 110 25.4142 110 25C110 24.5858 109.664 24.25 109.25 24.25H104.75V19.75C104.75 19.3358 104.414 19 104 19C103.586 19 103.25 19.3358 103.25 19.75V24.25H98.75C98.3358 24.25 98 24.5858 98 25C98 25.4142 98.3358 25.75 98.75 25.75H103.25Z"
              fill="#89888D"
            />
            <path
              d="M114.529 29L117.494 20.2695H119.949L122.996 29H120.916L119.568 24.8984C119.217 23.7617 118.877 22.4316 118.496 20.8965H118.906C118.537 22.4375 118.227 23.7793 117.893 24.8984L116.592 29H114.529ZM116.428 27.0254V25.5723H121.104V27.0254H116.428ZM126.096 29.1055C124.602 29.1055 123.436 27.9277 123.436 25.7363C123.436 23.4863 124.648 22.3672 126.084 22.3672C127.174 22.3672 127.707 23.0234 127.941 23.5625H128V20.2695H129.834V29H128.023V27.9512H127.941C127.695 28.4961 127.145 29.1055 126.096 29.1055ZM126.676 27.6465C127.537 27.6465 128.035 26.8848 128.035 25.7305C128.035 24.5703 127.549 23.832 126.676 23.832C125.791 23.832 125.322 24.6055 125.322 25.7305C125.322 26.8613 125.797 27.6465 126.676 27.6465ZM133.689 29.1055C132.195 29.1055 131.029 27.9277 131.029 25.7363C131.029 23.4863 132.242 22.3672 133.678 22.3672C134.768 22.3672 135.301 23.0234 135.535 23.5625H135.594V20.2695H137.428V29H135.617V27.9512H135.535C135.289 28.4961 134.738 29.1055 133.689 29.1055ZM134.27 27.6465C135.131 27.6465 135.629 26.8848 135.629 25.7305C135.629 24.5703 135.143 23.832 134.27 23.832C133.385 23.832 132.916 24.6055 132.916 25.7305C132.916 26.8613 133.391 27.6465 134.27 27.6465ZM143.521 29L141.119 22.4492H143.064L144.137 25.8008C144.4 26.6504 144.582 27.5117 144.787 28.4609H144.412C144.617 27.5117 144.787 26.6562 145.051 25.8008L146.105 22.4492H148.033L145.625 29H143.521ZM148.936 29V22.4492H150.77V29H148.936ZM149.85 21.623C149.311 21.623 148.865 21.207 148.865 20.6973C148.865 20.1816 149.311 19.7715 149.85 19.7715C150.395 19.7715 150.846 20.1816 150.846 20.6973C150.846 21.207 150.395 21.623 149.85 21.623ZM155.217 29.1289C153.195 29.1289 151.959 27.8398 151.959 25.7598C151.959 23.7383 153.201 22.3672 155.129 22.3672C156.875 22.3672 158.229 23.4805 158.229 25.6953V26.1992H152.686V25.0684H157.338L156.477 25.3613C156.477 24.3711 156.025 23.7383 155.146 23.7383C154.262 23.7383 153.775 24.3887 153.775 25.291V26.0938C153.775 27.1953 154.361 27.7637 155.246 27.7637C155.844 27.7637 156.295 27.5059 156.477 27.0195L158.129 27.3125C157.807 28.4141 156.752 29.1289 155.217 29.1289ZM160.59 29L158.662 22.4492H160.59L161.135 24.8281C161.322 25.7012 161.562 26.709 161.75 27.9395H161.551C161.75 26.7324 162.008 25.7188 162.219 24.8281L162.799 22.4492H164.469L165.031 24.8281C165.23 25.707 165.494 26.7207 165.693 27.9395H165.494C165.682 26.7266 165.904 25.7188 166.098 24.8281L166.643 22.4492H168.594L166.654 29H164.785L164.07 26.5215C163.859 25.7949 163.66 24.6934 163.461 23.8789H163.783C163.584 24.6875 163.379 25.8008 163.174 26.5215L162.459 29H160.59Z"
              fill="#89888D"
            />
          </g>
        </g>

        <!-- Tab text - Frame 4 -->
        <g :style="{ opacity: !currentFrame.showFrame1Tabs ? 1 : 0 }" class="tabs-frame4">
          <path
            d="M98.9297 20.2695V29H97.0605V20.2695H98.9297ZM103.061 29.1289C101.455 29.1289 100.354 28.4141 100.125 27.1895L101.836 26.9023C102 27.5 102.404 27.8047 103.119 27.8047C103.764 27.8047 104.162 27.5352 104.162 27.1602C104.162 26.8262 103.893 26.627 103.324 26.5098L102.193 26.2812C100.922 26.0234 100.295 25.4023 100.295 24.4121C100.295 23.1465 101.396 22.3672 103.078 22.3672C104.66 22.3672 105.615 23.0527 105.855 24.1367L104.232 24.4121C104.098 23.9668 103.723 23.6738 103.113 23.6738C102.557 23.6738 102.129 23.9258 102.129 24.3008C102.129 24.6113 102.34 24.834 102.943 24.957L104.139 25.1914C105.416 25.4492 106.031 26.0234 106.031 26.9609C106.031 28.2676 104.801 29.1289 103.061 29.1289ZM109.834 29.1289C108.229 29.1289 107.127 28.4141 106.898 27.1895L108.609 26.9023C108.773 27.5 109.178 27.8047 109.893 27.8047C110.537 27.8047 110.936 27.5352 110.936 27.1602C110.936 26.8262 110.666 26.627 110.098 26.5098L108.967 26.2812C107.695 26.0234 107.068 25.4023 107.068 24.4121C107.068 23.1465 108.17 22.3672 109.852 22.3672C111.434 22.3672 112.389 23.0527 112.629 24.1367L111.006 24.4121C110.871 23.9668 110.496 23.6738 109.887 23.6738C109.33 23.6738 108.902 23.9258 108.902 24.3008C108.902 24.6113 109.113 24.834 109.717 24.957L110.912 25.1914C112.189 25.4492 112.805 26.0234 112.805 26.9609C112.805 28.2676 111.574 29.1289 109.834 29.1289ZM116.227 29.082C114.861 29.082 113.965 28.1387 113.965 26.6211V22.4492H115.799V26.2871C115.799 27.084 116.232 27.5586 116.953 27.5586C117.68 27.5586 118.184 27.0664 118.184 26.2285V22.4492H120.023V29H118.289L118.26 27.3594H118.359C118.02 28.4492 117.328 29.082 116.227 29.082ZM124.465 29.1289C122.443 29.1289 121.207 27.8398 121.207 25.7598C121.207 23.7383 122.449 22.3672 124.377 22.3672C126.123 22.3672 127.477 23.4805 127.477 25.6953V26.1992H121.934V25.0684H126.586L125.725 25.3613C125.725 24.3711 125.273 23.7383 124.395 23.7383C123.51 23.7383 123.023 24.3887 123.023 25.291V26.0938C123.023 27.1953 123.609 27.7637 124.494 27.7637C125.092 27.7637 125.543 27.5059 125.725 27.0195L127.377 27.3125C127.055 28.4141 126 29.1289 124.465 29.1289ZM131.291 29.1289C129.686 29.1289 128.584 28.4141 128.355 27.1895L130.066 26.9023C130.23 27.5 130.635 27.8047 131.35 27.8047C131.994 27.8047 132.393 27.5352 132.393 27.1602C132.393 26.8262 132.123 26.627 131.555 26.5098L130.424 26.2812C129.152 26.0234 128.525 25.4023 128.525 24.4121C128.525 23.1465 129.627 22.3672 131.309 22.3672C132.891 22.3672 133.846 23.0527 134.086 24.1367L132.463 24.4121C132.328 23.9668 131.953 23.6738 131.344 23.6738C130.787 23.6738 130.359 23.9258 130.359 24.3008C130.359 24.6113 130.57 24.834 131.174 24.957L132.369 25.1914C133.646 25.4492 134.262 26.0234 134.262 26.9609C134.262 28.2676 133.031 29.1289 131.291 29.1289Z"
            fill="#626168"
          />
          <path
            d="M20.3184 29L23.2832 20.2695H25.7383L28.7852 29H26.7051L25.3574 24.8984C25.0059 23.7617 24.666 22.4316 24.2852 20.8965H24.6953C24.3262 22.4375 24.0156 23.7793 23.6816 24.8984L22.3809 29H20.3184ZM22.2168 27.0254V25.5723H26.8926V27.0254H22.2168ZM31.8027 29.041C30.4199 29.041 29.7988 28.4668 29.7988 27.2773V20.2695H31.6328V27.0371C31.6328 27.4414 31.7676 27.6113 32.1133 27.6113C32.2949 27.6113 32.3828 27.5938 32.459 27.5703L32.7461 28.8945C32.5586 28.959 32.2188 29.041 31.8027 29.041ZM35.5527 29.041C34.1699 29.041 33.5488 28.4668 33.5488 27.2773V20.2695H35.3828V27.0371C35.3828 27.4414 35.5176 27.6113 35.8633 27.6113C36.0449 27.6113 36.1328 27.5938 36.209 27.5703L36.4961 28.8945C36.3086 28.959 35.9688 29.041 35.5527 29.041ZM40.0879 29V22.4492H41.9219V29H40.0879ZM41.002 21.623C40.4629 21.623 40.0176 21.207 40.0176 20.6973C40.0176 20.1816 40.4629 19.7715 41.002 19.7715C41.5469 19.7715 41.998 20.1816 41.998 20.6973C41.998 21.207 41.5469 21.623 41.002 21.623ZM46.709 22.4492V23.8379H42.7715V22.4492H46.709ZM43.6621 20.8906H45.4961V27.0605C45.4961 27.459 45.666 27.6465 46.0762 27.6465C46.2109 27.6465 46.5098 27.5996 46.6328 27.5703L46.8906 28.9355C46.4805 29.0527 46.0762 29.0938 45.7129 29.0938C44.377 29.0938 43.6621 28.4375 43.6621 27.2246V20.8906ZM50.7285 29.1289C48.707 29.1289 47.4707 27.8398 47.4707 25.7598C47.4707 23.7383 48.7129 22.3672 50.6406 22.3672C52.3867 22.3672 53.7402 23.4805 53.7402 25.6953V26.1992H48.1973V25.0684H52.8496L51.9883 25.3613C51.9883 24.3711 51.5371 23.7383 50.6582 23.7383C49.7734 23.7383 49.2871 24.3887 49.2871 25.291V26.0938C49.2871 27.1953 49.873 27.7637 50.7578 27.7637C51.3555 27.7637 51.8066 27.5059 51.9883 27.0195L53.6406 27.3125C53.3184 28.4141 52.2637 29.1289 50.7285 29.1289ZM54.9121 29V22.4492H56.6113L56.7051 24.1016H56.5762C56.8691 22.8711 57.6777 22.3555 58.5625 22.3555C59.4941 22.3555 60.0625 22.9355 60.3438 24.2188H60.1328C60.4316 22.9238 61.3574 22.3555 62.3594 22.3555C63.5664 22.3555 64.4512 23.1699 64.4512 24.582V29H62.6113V24.957C62.6113 24.2363 62.1836 23.8789 61.6094 23.8789C60.9648 23.8789 60.5664 24.3301 60.5664 24.998V29H58.7969V24.916C58.7969 24.2832 58.3867 23.8789 57.8066 23.8789C57.2031 23.8789 56.7461 24.3008 56.7461 25.0625V29H54.9121ZM68.5586 29.1289C66.9531 29.1289 65.8516 28.4141 65.623 27.1895L67.334 26.9023C67.498 27.5 67.9023 27.8047 68.6172 27.8047C69.2617 27.8047 69.6602 27.5352 69.6602 27.1602C69.6602 26.8262 69.3906 26.627 68.8223 26.5098L67.6914 26.2812C66.4199 26.0234 65.793 25.4023 65.793 24.4121C65.793 23.1465 66.8945 22.3672 68.5762 22.3672C70.1582 22.3672 71.1133 23.0527 71.3535 24.1367L69.7305 24.4121C69.5957 23.9668 69.2207 23.6738 68.6113 23.6738C68.0547 23.6738 67.627 23.9258 67.627 24.3008C67.627 24.6113 67.8379 24.834 68.4414 24.957L69.6367 25.1914C70.9141 25.4492 71.5293 26.0234 71.5293 26.9609C71.5293 28.2676 70.2988 29.1289 68.5586 29.1289Z"
            fill="#89888D"
          />
          <!-- Plus icon wrapped in animated group (frame 4) -->
          <g
            :style="{ transform: `translateX(${currentFrame.plusIconX - 104}px)` }"
            class="animated-plus-icon"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M103.25 25.75V30.25C103.25 30.6642 103.586 31 104 31C104.414 31 104.75 30.6642 104.75 30.25V25.75H109.25C109.664 25.75 110 25.4142 110 25C110 24.5858 109.664 24.25 109.25 24.25H104.75V19.75C104.75 19.3358 104.414 19 104 19C103.586 19 103.25 19.3358 103.25 19.75V24.25H98.75C98.3358 24.25 98 24.5858 98 25C98 25.4142 98.3358 25.75 98.75 25.75H103.25Z"
              fill="#89888D"
            />
            <path
              d="M114.529 29L117.494 20.2695H119.949L122.996 29H120.916L119.568 24.8984C119.217 23.7617 118.877 22.4316 118.496 20.8965H118.906C118.537 22.4375 118.227 23.7793 117.893 24.8984L116.592 29H114.529ZM116.428 27.0254V25.5723H121.104V27.0254H116.428ZM126.096 29.1055C124.602 29.1055 123.436 27.9277 123.436 25.7363C123.436 23.4863 124.648 22.3672 126.084 22.3672C127.174 22.3672 127.707 23.0234 127.941 23.5625H128V20.2695H129.834V29H128.023V27.9512H127.941C127.695 28.4961 127.145 29.1055 126.096 29.1055ZM126.676 27.6465C127.537 27.6465 128.035 26.8848 128.035 25.7305C128.035 24.5703 127.549 23.832 126.676 23.832C125.791 23.832 125.322 24.6055 125.322 25.7305C125.322 26.8613 125.797 27.6465 126.676 27.6465ZM133.689 29.1055C132.195 29.1055 131.029 27.9277 131.029 25.7363C131.029 23.4863 132.242 22.3672 133.678 22.3672C134.768 22.3672 135.301 23.0234 135.535 23.5625H135.594V20.2695H137.428V29H135.617V27.9512H135.535C135.289 28.4961 134.738 29.1055 133.689 29.1055ZM134.27 27.6465C135.131 27.6465 135.629 26.8848 135.629 25.7305C135.629 24.5703 135.143 23.832 134.27 23.832C133.385 23.832 132.916 24.6055 132.916 25.7305C132.916 26.8613 133.391 27.6465 134.27 27.6465ZM143.521 29L141.119 22.4492H143.064L144.137 25.8008C144.4 26.6504 144.582 27.5117 144.787 28.4609H144.412C144.617 27.5117 144.787 26.6562 145.051 25.8008L146.105 22.4492H148.033L145.625 29H143.521ZM148.936 29V22.4492H150.77V29H148.936ZM149.85 21.623C149.311 21.623 148.865 21.207 148.865 20.6973C148.865 20.1816 149.311 19.7715 149.85 19.7715C150.395 19.7715 150.846 20.1816 150.846 20.6973C150.846 21.207 150.395 21.623 149.85 21.623ZM155.217 29.1289C153.195 29.1289 151.959 27.8398 151.959 25.7598C151.959 23.7383 153.201 22.3672 155.129 22.3672C156.875 22.3672 158.229 23.4805 158.229 25.6953V26.1992H152.686V25.0684H157.338L156.477 25.3613C156.477 24.3711 156.025 23.7383 155.146 23.7383C154.262 23.7383 153.775 24.3887 153.775 25.291V26.0938C153.775 27.1953 154.361 27.7637 155.246 27.7637C155.844 27.7637 156.295 27.5059 156.477 27.0195L158.129 27.3125C157.807 28.4141 156.752 29.1289 155.217 29.1289ZM160.59 29L158.662 22.4492H160.59L161.135 24.8281C161.322 25.7012 161.562 26.709 161.75 27.9395H161.551C161.75 26.7324 162.008 25.7188 162.219 24.8281L162.799 22.4492H164.469L165.031 24.8281C165.23 25.707 165.494 26.7207 165.693 27.9395H165.494C165.682 26.7266 165.904 25.7188 166.098 24.8281L166.643 22.4492H168.594L166.654 29H164.785L164.07 26.5215C163.859 25.7949 163.66 24.6934 163.461 23.8789H163.783C163.584 24.6875 163.379 25.8008 163.174 26.5215L162.459 29H160.59Z"
              fill="#89888D"
            />
          </g>
        </g>

        <!-- Blue underline bar -->
        <rect
          :x="currentFrame.blueBarX"
          y="47"
          :width="currentFrame.blueBarWidth"
          height="4"
          rx="2"
          fill="#1F75CB"
          :class="{ 'blue-bar-reset': frame === 0 }"
          class="animated-element"
        />
      </g>
      <defs>
        <clipPath id="clip0">
          <rect width="240" height="170" fill="white" />
        </clipPath>
        <clipPath id="clip1">
          <rect width="16" height="16" fill="white" transform="translate(8 115)" />
        </clipPath>
      </defs>
    </svg>
  </div>
</template>

<style scoped>
.animation-container {
  width: 240px;
  height: 170px;
  position: relative;
  margin: 0 auto;
}

.animation-container svg {
  display: block;
  background: transparent;
}

.animated-element {
  transition: all 0.6s ease-in-out;
}

.pill-buttons {
  transition: opacity 0.3s ease-in-out;
}

.highlight-pill {
  transition: opacity 0.6s ease-in-out;
}

.tabs-frame1,
.tabs-frame4 {
  transition: opacity 0.6s ease-in-out;
}

.blue-bar-reset {
  transition: all 0.6s ease-out;
}

.animated-plus-icon {
  transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
}
</style>
