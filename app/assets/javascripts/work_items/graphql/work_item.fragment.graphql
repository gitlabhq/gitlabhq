#import "ee_else_ce/work_items/graphql/work_item_widgets.fragment.graphql"
#import "~/graphql_shared/fragments/author.fragment.graphql"

fragment WorkItem on WorkItem {
  id
  iid
  archived
  title
  state
  description
  confidential
  createdAt
  closedAt
  webUrl
  reference(full: true)
  createNoteEmail
  project {
    id
  }
  namespace {
    id
    fullPath
    name
    fullName
  }
  author {
    ...Author
  }
  workItemType {
    id
    name
    iconName
  }
  userPermissions {
    deleteWorkItem
    updateWorkItem
    adminParentLink
    setWorkItemMetadata
    createNote
    adminWorkItemLink
    markNoteAsInternal
    reportSpam
  }
  mockWidgets @client {
    type
    customFieldValues {
      ... on LocalWorkItemNumberFieldValue {
        id
        customField {
          id
          fieldType
          name
        }
        value
      }

      ... on LocalWorkItemTextFieldValue {
        id
        customField {
          id
          fieldType
          name
        }
        value
      }

      ... on LocalWorkItemSelectFieldValue {
        id
        customField {
          id
          fieldType
          name
          selectOptions
        }
        selectedOptions {
          id
          value
        }
      }
    }
  }
  widgets {
    ...WorkItemWidgets
  }
}
