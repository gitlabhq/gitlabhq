---
stage: Security Risk Management
group: Security Insights
info: To determine the technical writer assigned to the Stage/Group associated with this page, see https://handbook.gitlab.com/handbook/product/ux/technical-writing/#assignments
title: セキュリティスキャンの結果
---

{{< details >}}

- プラン: Free、Premium、Ultimate
- 提供形態: GitLab.com、GitLab Self-Managed、GitLab Dedicated

{{< /details >}}

{{< history >}}

- GitLab 17.9で`dependency_scanning_for_pipelines_with_cyclonedx_reports`[フラグ](../../../administration/feature_flags/_index.md)とともに[導入](https://gitlab.com/gitlab-org/gitlab/-/issues/490334)されました。デフォルトでは無効になっています。
- GitLab 17.9の[GitLab.comおよびGitLab Self-Managedで有効](https://gitlab.com/gitlab-org/gitlab/-/issues/490332)になりました。
- 機能フラグ`dependency_scanning_for_pipelines_with_cyclonedx_reports`は17.10で削除されました。

{{< /history >}}

GitLabでパイプラインセキュリティスキャンの結果を表示し、対応します。パイプラインで実行されるセキュリティスキャナーを選択し、セキュリティレポートを出力します。これらのレポートの内容は処理され、GitLabに表示されます。

セキュリティスキャンの結果を理解するための主要な用語:

検出結果
: - 検出結果は、開発ブランチで特定された潜在的な脆弱性です。検出結果は、ブランチがデフォルトブランチにマージされると脆弱性になります。
: - 検出結果は、関連するCI/CDジョブアーティファクトが期限切れになるか、パイプラインの作成から90日後に期限切れになります。関連するジョブアーティファクトがロックされている場合でも同様です。

脆弱性
: - 脆弱性は、デフォルトブランチで特定されたソフトウェアのセキュリティ上の弱点です。
: - 脆弱性レコードは、[アーカイブ](../vulnerability_archival/_index.md)されるまで永続化されます。脆弱性がデフォルトブランチで検出されなくなった場合でも同様です。

デフォルトブランチで識別された脆弱性は、[脆弱性レポート](../vulnerability_report/_index.md)に一覧表示されます。

## セキュリティレポートアーティファクト {#security-report-artifacts}

セキュリティスキャナーは、ブランチパイプライン、および有効になっている場合はマージリクエストパイプラインで実行されます。各セキュリティスキャナーは、特定のセキュリティスキャナーによって検出されたすべての検出結果または脆弱性の詳細を含むセキュリティレポートアーティファクトを出力します。これらをダウンロードして、GitLabの外部で分析できます。

[子パイプライン](../../../ci/pipelines/downstream_pipelines.md#view-child-pipeline-reports-in-merge-requests)からのセキュリティレポートは、パイプラインセキュリティレポートおよびマージリクエストウィジェットに含まれています。

開発（非デフォルト）ブランチでは、検出結果には、開発ブランチの作成時にターゲットブランチに存在する脆弱性が含まれます。

期限切れの検出結果は、パイプラインの**セキュリティ**タブに表示されません。これらを再現するには、パイプラインを再実行します。

### セキュリティレポートをダウンロード {#download-a-security-report}

{{< details >}}

- プラン: Ultimate

{{< /details >}}

セキュリティレポートをダウンロードして、たとえばGitLabの外部で分析したり、アーカイブしたりできます。セキュリティレポートはJSONファイルです。

セキュリティレポートをダウンロードするには:

1. 上部のバーで、**検索または移動先**を選択して、プロジェクトを見つけます。
1. **ビルド** > **パイプライン**を選択します。
1. パイプラインを選択します。
1. **セキュリティ**タブを選択します。
1. **結果をダウンロード**を選択し、目的のセキュリティレポートを選択します。

選択したセキュリティレポートがデバイスにダウンロードされます。

![セキュリティレポートの一覧](img/security_report_v18_1.png)

## パイプラインセキュリティレポート {#pipeline-security-report}

{{< details >}}

- プラン: Ultimate

{{< /details >}}

パイプラインセキュリティレポートには、ブランチで検出されたすべての検出結果または脆弱性の詳細が含まれています。デフォルトブランチに対して実行されたパイプラインの場合、パイプラインセキュリティレポート内のすべての脆弱性は、脆弱性レポートにも含まれています。

検出結果または脆弱性ごとに、次のことができます:

- 説明を選択して、詳細を表示します。
- ステータスまたは重大度を変更します。
- GitLabイシューを作成して、解決または軽減するために行われたアクションを追跡、ドキュメント化、管理します。

![ブランチ内の検出結果のリスト](img/pipeline_security_report_v18_1.png)

### パイプラインセキュリティレポートを表示 {#view-pipeline-security-report}

パイプラインセキュリティレポートを表示して、ブランチで検出されたすべての検出結果または脆弱性の詳細を表示します。

パイプラインセキュリティレポートを表示するには:

1. 上部のバーで、**検索または移動先**を選択して、プロジェクトを見つけます。
1. **ビルド** > **パイプライン**を選択します。
1. 最新のパイプラインを選択します。

検出結果または脆弱性の詳細を表示するには、その説明を選択します。

### ステータスまたは重大度を変更 {#change-status-or-severity}

パイプラインのセキュリティタブで、検出結果または脆弱性のステータス、重大度、またはその両方を変更できます。ブランチがデフォルトブランチにマージされると、検出結果に加えられた変更はすべて保持されます。

前提条件: 

- プロジェクトのメンテナーロール、または`admin_vulnerability`カスタム権限が少なくとも必要です。

検出結果または脆弱性のステータスと重大度を変更するには:

1. 上部のバーで、**検索または移動先**を選択して、プロジェクトを見つけます。
1. **ビルド** > **パイプライン**を選択します。
1. 最新のパイプラインを選択します。
1. **セキュリティ**タブを選択します。
1. 検出結果レポート内:

     1. 変更する検出結果または脆弱性を選択します。

        - 個々の検出結果または脆弱性を選択するには、それぞれの横にあるチェックボックスをオンにします。
        - ページ上のすべての検出結果または脆弱性を選択するには、テーブルヘッダーのチェックボックスをオンにします。

     1. **アクションを選択**ドロップダウンリストで、**ステータスの変更**または**重大度の変更**を選択します。

### イシューを作成 {#create-an-issue}

イシューを作成して、検出結果または脆弱性の修正作業を追跡、ドキュメント化、管理します。

1. 上部のバーで、**検索または移動先**を選択して、プロジェクトを見つけます。
1. **ビルド** > **パイプライン**を選択します。
1. パイプラインを選択します。
1. **セキュリティ**タブを選択します。
1. 検出結果の説明を選択します。
1. **イシューの作成**を選択します。

検出結果または脆弱性の説明からコピーされた説明とともに、イシューがプロジェクトに作成されます。

## マージリクエストセキュリティウィジェット {#merge-request-security-widget}

{{< details >}}

- プラン: Ultimate

{{< /details >}}

マージリクエストには、変更によって検出結果にどのような差が生じるかの概要を示すセキュリティウィジェットが表示されます。CI/CDパイプラインの実行後、セキュリティレポートの処理に時間がかかるため、セキュリティウィジェットが表示されるまでに遅延が発生する可能性があります。

たとえば、これらのスキャン結果を含む2つのパイプラインを考えてみましょう:

- ソースブランチパイプラインは、`V1`および`V2`として識別される2つの脆弱性を検出します。
- ターゲットブランチパイプラインは、`V1`および`V3`として識別される2つの脆弱性を検出します。
- `V2`は、マージリクエストウィジェットに「added」と表示されます。
- `V3`は、マージリクエストウィジェットに「fixed」と表示されます。
- `V1`は両方のブランチに存在し、マージリクエストウィジェットには表示されません。

ソースブランチとターゲットブランチの差分を表示するには、両方からのセキュリティレポートが必要です。フィーチャーブランチがターゲットブランチから作成されたときのコミットに対する最新の10個のパイプラインで、セキュリティレポートが確認されます。最新の10個のパイプラインで見つからない場合、すべての検出結果は新規としてリストされます。マージリクエストでセキュリティスキャンを有効にする前に、デフォルトブランチに対してセキュリティスキャンが有効になっていることを確認してください。

### セキュリティウィジェットを表示 {#view-security-widget}

マージリクエストセキュリティウィジェットを表示して、変更によって検出結果にどのような差が生じるかを確認します。

セキュリティウィジェットを表示するには:

1. 上部のバーで、**検索または移動先**を選択して、プロジェクトを見つけます。
1. **マージリクエスト**を選択します。
1. マージリクエストを選択します。

セキュリティレポートタイプごとに詳細を表示するには、**詳細を表示**（{{< icon name="chevron-down" >}}）を選択します。各セキュリティレポートタイプについて、ウィジェットには、重大度順に並べられた、最初に追加された25個の検出結果と修正された25個の検出結果が表示されます。マージリクエストのソースブランチ上のすべての検出結果を表示するには、**すべてのパイプラインの検証結果を表示する**を選択します。

![マージリクエストのセキュリティスキャンの結果](img/mr_security_widget_v18_1.png)

## トラブルシューティング {#troubleshooting}

セキュリティスキャンを使用する場合、次の問題が発生する可能性があります。

### MRセキュリティウィジェットに無視された脆弱性が表示される {#dismissed-vulnerabilities-are-visible-in-mr-security-widget}

マージリクエストでセキュリティウィジェットを表示すると、無視された脆弱性がまだリストされていることがわかる場合があります。

この問題に対する解決策はまだありません。詳細については、[イシュー411235](https://gitlab.com/gitlab-org/gitlab/-/issues/411235)を参照してください。

### レポートの解析中およびスキャン取り込みのエラー {#report-parsing-and-scan-ingestion-errors}

> [!note]これらの手順は、GitLabサポートがこのようなエラーを再現するために使用するものです。

一部のセキュリティスキャンでは、レポートの解析中またはスキャン取り込みに関連するパイプラインの**セキュリティ**タブでエラーが発生する場合があります。ユーザーからプロジェクトのコピーを入手できない場合は、スキャンから生成されたレポートを使用してエラーを再現できます。

エラーを再現するには:

1. ユーザーからレポートのコピーを入手します。この例では、`gl-sast-report.json`です。
1. プロジェクトを作成します。
1. リポジトリにレポートをコミットします。
1. `.gitlab-ci.yml`ファイルを追加し、ジョブでアーティファクトとしてレポートを含めます。

   たとえば、SASTジョブによって発生したエラーを再現するには:

   ```yaml
   sample-job:
     script:
       - echo "Testing report"
     artifacts:
       reports:
         sast: gl-sast-report.json
   ```

1. パイプラインが完了したら、パイプラインの**セキュリティ**タブの内容にエラーがないか確認します。

`sast: gl-sast-report.json`をそれぞれの[`artifacts:reports`](../../../ci/yaml/_index.md#artifactsreports)タイプと、レポートを生成したスキャンに応じて正しいJSONレポートのファイル名に置き換えることができます。
